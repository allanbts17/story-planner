<app-header title="Nueva historia"></app-header>

<ion-content [fullscreen]="true">
  <form [formGroup]="formGroup" (ngSubmit)="saveStory()" class="px-3 pt-4">
    <!-- <div #imageContainer></div> -->

    <div *ngIf="imageData" class=" px-2">
      <div class="relative">
        <div (click)="imageData = null" class="circle flex justify-center items-center">
          <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="8px" height="8px">
            <path d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"/>
          </svg>
        </div>
        <img [src]="imageData" alt="Pasted Image" class="w-full">
      </div>
      <br />
    </div>
    <input placeholder="Copie una imagen y péguela aquí"
      id="story-image-copy-area"
      class="w-full flex items-center justify-center border-2 rounded-lg border-dashed border-blue-700 h-14">
    <!-- <div id="story-image-copy-area" class="flex items-center justify-center border-2 rounded-lg border-dashed border-blue-700 h-14">
      <p class="text-center">Copie una imagen y péguela aquí</p>
    </div> -->
    <!-- <ion-input helperText="Esto no es obligatorio" formControlName="image" label="Imagen" label-placement="floating" fill="outline"></ion-input> -->
    <br />
    <ion-input formControlName="title" label="Título" label-placement="floating"
      fill="outline"></ion-input>
    <br />
    <ion-input helperText="Esto no es obligatorio" formControlName="series"
      label="Serie" label-placement="floating" fill="outline"></ion-input>
    <br />

    <div class="flex flex-row">
      <ion-input formControlName="auxGenre" label="Géneros"
        label-placement="floating" fill="outline"></ion-input>
      <ion-button (click)="addGenre()" class="mt-2 mx-2 w-3/12" fill="outline"
        shape="round">
        <ion-icon name="add"></ion-icon>
      </ion-button>
    </div>
    <div class="mt-1">
      <ion-chip *ngFor="let genre of genreList">
        <ion-label>{{genre}}</ion-label>
        <ion-icon (click)="deleteGenre(genre)" name="close"></ion-icon>
      </ion-chip>
    </div>

    <br />
    <ion-textarea formControlName="synopsis" label="Sinopsis"
      labelPlacement="floating" fill="outline"></ion-textarea>

    <ion-row class="mt-4">
      <ion-col>
        <ion-button type="submit" expand="block" [disabled]="!formGroup.valid">Guardar</ion-button>
      </ion-col>
    </ion-row>
  </form>

</ion-content>
